{"ast":null,"code":"import React from'react';import{UserContext}from\"../UserContext\";import{Box,Button,Divider,MenuItem,Paper,Stack,styled,TextField,Typography}from\"@mui/material\";import{LayoutContext}from\"../LayoutContext\";import{translations}from\"../../translations\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function Settings(){const settings=React.useContext(UserContext);const layout=React.useContext(LayoutContext);const[connectivityData,setConnectivityData]=React.useState(null);const handleThemeChange=event=>{settings.setActiveTheme(event.target.value);document.cookie=\"theme=\".concat(event.target.value,\"; path=/\");};const handleLanguageChange=event=>{settings.setLanguage(event.target.value);fetch(\"/api/change_language\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({language:event.target.value,user_id:settings.user_id})}).then(res=>res.json());};const handleTestConnection=event=>{fetch(\"/api/health\",{method:\"GET\"}).then(res=>res.json()).then(res=>{setConnectivityData(res.message);}).catch(console.error);};const OptionPaper=styled(Paper)(_ref=>{let{theme}=_ref;return{paddingTop:layout.headerAppBarHeight,borderRadius:theme.shape.borderRadius,backgroundColor:theme.palette.background.paper};});return/*#__PURE__*/_jsx(OptionPaper,{elevation:3,children:/*#__PURE__*/_jsx(Box,{margin:2,justifySelf:\"center\",children:/*#__PURE__*/_jsxs(Stack,{direction:\"column\",spacing:2,children:[/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,padding:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"p\",component:\"div\",sx:{flexGrow:2,textAlign:\"left\"},padding:1,children:translations[settings.language].settSchema}),/*#__PURE__*/_jsxs(TextField,{select:true,size:\"small\",value:settings.activeTheme,sx:{flexGrow:1.5},onChange:handleThemeChange,variant:\"outlined\",children:[/*#__PURE__*/_jsx(MenuItem,{value:0,children:\"Green\"}),/*#__PURE__*/_jsx(MenuItem,{value:1,children:\"Orange\"})]})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,padding:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"p\",component:\"div\",sx:{flexGrow:2,textAlign:\"left\"},padding:1,children:\"Language\"}),/*#__PURE__*/_jsxs(TextField,{select:true,size:\"small\",value:settings.language,sx:{flexGrow:1.5},onChange:handleLanguageChange,variant:\"outlined\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"de\",children:\"German\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"en\",children:\"English\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"it\",children:\"Italian\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"fr\",children:\"French\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"es\",children:\"Spanish\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"ar\",children:\"Syrian\"})]})]}),settings.role===\"Admin\"&&/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Divider,{variant:\"fullWidth\",sx:{paddingTop:1}}),/*#__PURE__*/_jsx(Divider,{variant:\"fullWidth\"}),/*#__PURE__*/_jsxs(Stack,{direction:\"column\",spacing:2,paddingTop:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",component:\"div\",sx:{flexGrow:1.5},children:\"Admin-Settings\"}),/*#__PURE__*/_jsx(SectionChanger,{}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,padding:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"p\",component:\"div\",sx:{flexGrow:2,textAlign:\"left\"},padding:1,children:\"Test Connection\"}),/*#__PURE__*/_jsx(Button,{onClick:handleTestConnection,variant:\"contained\",color:\"primary\",sx:{flexGrow:1},children:\"Ping Backend\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"div\",sx:{flexGrow:2,textAlign:\"center\"},children:connectivityData})]}),/*#__PURE__*/_jsxs(Stack,{direction:\"column\",spacing:0,children:[/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",component:\"div\",sx:{flexGrow:1,paddingTop:2,textAlign:\"center\"},children:\"Add Points\"}),/*#__PURE__*/_jsx(PointAdder,{})]})]})]})})});}function PointAdder(){const settings=React.useContext(UserContext);const[pointsToAdd,setPointsToAdd]=React.useState(100);const handleSubmitPoints=event=>{console.log();fetch(\"/dev/update_points\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user_id:settings.userID,update:{points:pointsToAdd}})}).then(res=>res.json()).then(data=>{if(data.type===\"success\"){settings.setPoints(data.points);}else{}});};const handlePointsChange=event=>{setPointsToAdd(event.target.value);};return/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,padding:2,children:[/*#__PURE__*/_jsx(Button,{onClick:handleSubmitPoints,variant:\"contained\",color:\"primary\",sx:{flexGrow:1},children:\"Add\"}),/*#__PURE__*/_jsx(TextField,{id:\"filled-number\",type:\"number\",variant:\"filled\",onChange:handlePointsChange,value:pointsToAdd})]});}function SectionChanger(){const settings=React.useContext(UserContext);const[newSectionID,setNewSectionID]=React.useState(settings.sectionID);const handleClick=()=>{settings.setSectionID(newSectionID);};const handleChange=event=>{setNewSectionID(parseInt(event.target.value));};return/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,padding:2,children:[/*#__PURE__*/_jsx(Button,{onClick:handleClick,variant:\"contained\",children:/*#__PURE__*/_jsx(Typography,{variant:\"p\",component:\"div\",sx:{flexGrow:1.5},children:\"Change Section ID\"})}),/*#__PURE__*/_jsx(TextField,{id:\"filled-number\",type:\"number\",variant:\"filled\",onChange:handleChange})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}