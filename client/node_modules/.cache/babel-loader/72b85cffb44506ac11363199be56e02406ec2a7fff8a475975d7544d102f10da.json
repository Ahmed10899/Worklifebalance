{"ast":null,"code":"// Imports\nimport'./App.css';import React,{useEffect}from'react';import{PageWrapper}from\"./Components/PageWrapper\";import{UserContext}from\"./Components/UserContext\";import{LayoutContext}from\"./Components/LayoutContext\";import{Login}from\"./Components/Login/Login\";import{Box,ThemeProvider}from\"@mui/material\";import{themes}from\"./Components/Themes\";import{CourseList}from\"./Components/Courses/CourseList\";import{jsx as _jsx}from\"react/jsx-runtime\";export function App(){const[userLoggedIn,setUserLoggedIn]=React.useState(false);const[activeTab,setActiveTab]=React.useState(0);const[language,setLanguage]=React.useState(\"de\");const[name,setName]=React.useState(\"Nicht Angemeldet\");const[email,setEmail]=React.useState(\"\");const[userID,setUserID]=React.useState(\"ID00000\");const[activeTheme,setActiveTheme]=React.useState(0);const[role,setRole]=React.useState(\"Mitarbeiter\");const[points,setPoints]=React.useState(0);const[headerAppBarHeight,setHeaderAppBarHeight]=React.useState(0);const[navigationBarHeight,setNavigationBarHeight]=React.useState(0);const[currentCourse,setCurrentCourse]=React.useState({course:null,page:0});const[sectionID,setSectionID]=React.useState(0);if(!currentCourse.course){setCurrentCourse(prevState=>{let state=prevState;state.course=/*#__PURE__*/_jsx(CourseList,{});state.page=0;return state;});}const currentUser={activeTab,setActiveTab,language,setLanguage,name,setName,email,setEmail,userID,setUserID,activeTheme,setActiveTheme,setUserLoggedIn,role,setRole,points,setPoints,currentCourse,setCurrentCourse,sectionID,setSectionID};const layoutHeights={headerAppBarHeight:headerAppBarHeight,setHeaderAppBarHeight:setHeaderAppBarHeight,navigationBarHeight:navigationBarHeight,setNavigationBarHeight:setNavigationBarHeight};function getCookieValue(cookieName){const cookies=document.cookie.split('; ');for(let cookie of cookies){const[name,value]=cookie.split('=');if(name===cookieName){return value;// Return the cookie value if found\n}}return null;// Return null if the cookie is not set\n}useEffect(()=>{if(document.cookie.split('; ').some(cookie=>cookie.startsWith(\"theme=\"))){setActiveTheme(parseInt(getCookieValue(\"theme\")));}if(userLoggedIn){fetch('/api/get_user_data',{method:'POST',body:JSON.stringify({user_id:userID}),headers:{\"Content-Type\":\"application/json\"}}).then(res=>res.json()).then(res=>{setRole(prevState=>res.role?res.role:prevState);setName(prevState=>res.name?res.name:prevState);setEmail(prevState=>res.email?res.email:prevState);setSectionID(prevState=>res.section_id?res.section_id:prevState);setLanguage(prevState=>res.language?res.language:prevState);setPoints(prevState=>res.points?res.points:prevState);});}else if(document.cookie.split(\"; \").some(cookie=>cookie.startsWith(\"user_id=\"))){setUserID(getCookieValue(\"user_id\"));setUserLoggedIn(true);}},[userLoggedIn,userID]);return/*#__PURE__*/_jsx(LayoutContext.Provider,{value:layoutHeights,children:/*#__PURE__*/_jsx(ThemeProvider,{theme:themes[activeTheme],children:/*#__PURE__*/_jsx(Box,{className:\"App\",children:/*#__PURE__*/_jsx(UserContext.Provider,{value:currentUser,children:!userLoggedIn?/*#__PURE__*/_jsx(Login,{}):/*#__PURE__*/_jsx(PageWrapper,{})})})})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}