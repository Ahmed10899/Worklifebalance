{"ast":null,"code":"import{Box,Button,Divider,FormControl,FormControlLabel,List,ListItem,Modal,Paper,Radio,RadioGroup,Stack,Typography}from\"@mui/material\";import{UserContext}from\"./Components/UserContext\";import React,{useEffect}from\"react\";import{CourseList}from\"./Components/Courses/CourseList\";import{translations}from\"./translations\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function QuizPage(_ref){let{course}=_ref;const settings=React.useContext(UserContext);const[quizData,setQuizData]=React.useState([]);const[showModal,setShowModal]=React.useState(false);const[solutionData,setSolutionData]=React.useState([]);useEffect(()=>{fetch(\"api/quiz/get_questions\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\"},body:JSON.stringify({user_id:settings.userID,course_id:course.id,language:settings.language})}).then(res=>res.json()).then(data=>{if(data.hasOwnProperty(\"error\")){console.log(data);}setQuizData(data);});},[course.id,settings.language,settings.userID]);const[answers,setAnswers]=React.useState(new Array(quizData.length).fill(NaN));const changeAnswer=(value,key)=>{setAnswers(prevState=>{prevState[key]=value;return prevState;});};const handleSubmit=e=>{e.preventDefault();fetch(\"api/quiz/check_answers\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Accept\":\"application/json\"},body:JSON.stringify({user_id:settings.userID,course_id:course.id,choices:answers})}).then(res=>res.json()).then(data=>{if(data.type===\"success\"){setSolutionData(data);settings.setPoints(prevState=>{return prevState+parseInt(data.points);});setShowModal(true);}});};const handleClickBackButton=e=>{settings.setCurrentCourse({course:/*#__PURE__*/_jsx(CourseList,{})});};return/*#__PURE__*/_jsxs(_Fragment,{children:[showModal&&/*#__PURE__*/_jsx(SolveModal,{showModal:showModal,setShowModal:setShowModal,solutionData:solutionData}),/*#__PURE__*/_jsx(Box,{sx:{flexGrow:1,paddingTop:2,paddingBottom:2},children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,children:/*#__PURE__*/_jsxs(FormControl,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"textSecondary\",children:course.title}),/*#__PURE__*/_jsxs(Stack,{direction:\"column\",spacing:1,children:[/*#__PURE__*/_jsx(List,{component:\"div\",sx:{flexGrow:1},children:quizData.map((question,index)=>{return/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(QuestionBox,{question:question,changeAnswer:changeAnswer,index:index})},index);})}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,sx:{flexGrow:1},justifyContent:\"center\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",color:\"primary\",onClick:handleClickBackButton,children:translations[settings.language].courseBack}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",type:\"submit\",color:\"primary\",children:translations[settings.language].submit})]})]})]})})})]});}function SolveModal(_ref2){let{showModal,solutionData}=_ref2;const settings=React.useContext(UserContext);return/*#__PURE__*/_jsx(Modal,{sx:{height:\"100vh\",margin:1,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",zIndex:9999},open:showModal,children:/*#__PURE__*/_jsx(Paper,{sx:{padding:2,width:'90%'},children:/*#__PURE__*/_jsxs(Stack,{sx:{flexGrow:1,padding:2,width:\"90%\"},direction:\"column\",spacing:1,alignItems:\"center\",children:[/*#__PURE__*/_jsxs(Stack,{sx:{width:\"90%\"},direction:\"column\",alignItems:\"left\",spacing:1,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",color:\"textPrimary\",textAlign:\"left\",children:translations[settings.language].resultsTitle}),/*#__PURE__*/_jsx(Divider,{variant:\"middle\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"div\",color:\"textPrimary\",textAlign:\"left\",children:[translations[settings.language].totalQuestions,\": \",solutionData.total_answers]}),/*#__PURE__*/_jsxs(Typography,{variant:\"div\",color:\"textPrimary\",textAlign:\"left\",children:[translations[settings.language].correctAnswers,\": \",solutionData.correct_answers]}),/*#__PURE__*/_jsx(Divider,{variant:\"middle\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"div\",color:\"textPrimary\",textAlign:\"center\",children:[\"+\",solutionData.points,\" \",translations[settings.language].shopPoints]}),/*#__PURE__*/_jsx(Divider,{variant:\"middle\"})]}),/*#__PURE__*/_jsx(Stack,{direction:\"row\",spacing:1,sx:{flexGrow:1,paddingTop:2},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",onClick:()=>settings.setCurrentCourse({course:/*#__PURE__*/_jsx(CourseList,{}),page:0}),children:translations[settings.language].courseBack})})]})})});}function QuestionBox(_ref3){let{question,index,changeAnswer}=_ref3;return/*#__PURE__*/_jsx(Paper,{elevation:2,sx:{flexGrow:1,margin:1,padding:2},children:/*#__PURE__*/_jsxs(Stack,{direction:\"column\",spacing:2,children:[/*#__PURE__*/_jsx(Typography,{sx:{flexGrow:1},variant:\"h6\",children:question.question}),/*#__PURE__*/_jsx(Divider,{}),/*#__PURE__*/_jsx(RadioGroup,{onChange:event=>changeAnswer(event.target.value,index),children:question.options.map((option,key)=>{return/*#__PURE__*/_jsx(FormControlLabel,{value:key,label:option,control:/*#__PURE__*/_jsx(Radio,{})});})})]})});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}