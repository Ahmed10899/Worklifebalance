{"ast":null,"code":"import React,{useState,useContext,useEffect}from\"react\";import{Alert,Button,FormControl,IconButton,InputAdornment,InputLabel,OutlinedInput,Stack}from\"@mui/material\";import{UserContext}from\"../UserContext\";import\"../../App.css\";import{translations}from\"../../translations\";import{VerifiedUser,Visibility,VisibilityOff}from\"@mui/icons-material\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function Login(){const settings=useContext(UserContext);// States\nconst[isPasswordVisible,setIsPasswordVisible]=useState(false);const[message,setMessage]=useState({text:\"\",type:\"\"});// Language change function\nconst changeLanguage=e=>{const selectedLanguage=e.target.value;settings.setLanguage(selectedLanguage);};// Show message\nconst showMessage=function(text){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"success\";setMessage({text:text,type:type});setTimeout(()=>setMessage({text:\"\",type:\"\"}),4000);};// Handle login\nconst handleLogin=async e=>{e.preventDefault();const username=document.getElementById(\"username\").value;const password=document.getElementById(\"password\").value;if(!username||!password){showMessage(translations[settings.language].errorLogin||\"Please fill all fields.\",\"error\");return;}try{const response=await fetch(\"/login\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user_id:username,password:password,language:settings.language})});if(!(response.status===200)){const errorData=await response.json();showMessage(errorData.message||translations[settings.language].errorLogin||\"Login failed.\",\"error\");}else{const data=await response.json();settings.setUserLoggedIn(true);settings.setUserID(data.user_id);document.cookie=\"user_id=\".concat(data.user_id);showMessage(translations[settings.language].successLogin||\"Successfully logged in!\",\"success\");}}catch(error){console.error(\"API Error:\",error);showMessage(translations[settings.language].errorLogin||\"Error connecting to server.\",\"error\");}};// Toggle password visibility\nconst togglePasswordVisibility=()=>{setIsPasswordVisible(!isPasswordVisible);};// Zeigt das aktuelle Datum und die Uhrzeit an\nfunction updateDateTime(){const now=new Date();const date=now.toLocaleDateString(settings.language==='ar'?'ar-SA':settings.language,{year:'numeric',month:'short',day:'numeric'});const time=now.toLocaleTimeString(settings.language==='ar'?'ar-SA':settings.language,{hour:'2-digit',minute:'2-digit',second:'2-digit'});document.getElementById('dateTimeDisplay').textContent=translations[settings.language].dateTimeFormat.replace('{date}',date).replace('{time}',time);}// Verweildauer auf der Login-Seite\nlet loginStartTime=Date.now();function updateLoginTime(language){const elapsedTime=Date.now()-loginStartTime;const seconds=Math.floor(elapsedTime/1000);const minutes=Math.floor(seconds/60);const remainingSeconds=seconds%60;document.getElementById('loginTimeDisplay').textContent=\"\".concat(translations[settings.language].stayDuration,\": \").concat(minutes,\" Min \").concat(remainingSeconds,\" Sek\");}useEffect(()=>{const dateInterval=setInterval(()=>updateDateTime(),1000);const loginTimeInterval=setInterval(()=>updateLoginTime(),1000);return()=>{clearInterval(dateInterval);clearInterval(loginTimeInterval);};},[settings.language]);return/*#__PURE__*/_jsxs(\"div\",{className:\"login-background\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login-header\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"static/images/login_icon.png\",alt:\"Login Icon\",className:\"login-icon\"}),/*#__PURE__*/_jsx(\"h1\",{children:translations[settings.language].welcome})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsxs(FormControl,{className:\"input-wrapper\",children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"username\",children:/*#__PURE__*/_jsx(\"b\",{children:translations[settings.language].username})}),/*#__PURE__*/_jsx(OutlinedInput,{type:\"text\",id:\"username\",placeholder:translations[settings.language].placeholderUsername,endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{edge:\"end\",children:/*#__PURE__*/_jsx(VerifiedUser,{})})}),required:true}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsxs(FormControl,{className:\"input-wrapper\",variant:\"outlined\",children:[/*#__PURE__*/_jsx(InputLabel,{htmlFor:\"password\",children:/*#__PURE__*/_jsx(\"b\",{children:translations[settings.language].password})}),/*#__PURE__*/_jsx(OutlinedInput,{type:isPasswordVisible?\"text\":\"password\",id:\"password\",placeholder:translations[settings.language].placeholderPassword,required:true,endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{id:\"togglePassword\",onClick:togglePasswordVisibility,edge:\"end\",children:isPasswordVisible?/*#__PURE__*/_jsx(VisibilityOff,{}):/*#__PURE__*/_jsx(Visibility,{})})})})]})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",size:\"lg\",children:translations[settings.language].login})]}),message.text&&/*#__PURE__*/_jsx(Stack,{sx:{padding:2},children:/*#__PURE__*/_jsx(Alert,{variant:\"filled\",severity:\"error\",children:message.text})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"dateTimeContainer\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"dateTimeDisplay\",className:\"date-time-box\"}),/*#__PURE__*/_jsx(\"div\",{id:\"loginTimeDisplay\",className:\"date-time-box\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"language-selector\",children:/*#__PURE__*/_jsxs(\"select\",{id:\"languageSelect\",value:settings.language,onChange:changeLanguage,children:[/*#__PURE__*/_jsx(\"option\",{value:\"de\",children:\"Deutsch\"}),/*#__PURE__*/_jsx(\"option\",{value:\"en\",children:\"English\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ar\",children:\"\\u0639\\u0631\\u0628\\u064A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fr\",children:\"Fran\\xE7ais\"}),/*#__PURE__*/_jsx(\"option\",{value:\"es\",children:\"Espa\\xF1ol\"}),/*#__PURE__*/_jsx(\"option\",{value:\"it\",children:\"Italiano\"})]})})]});}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}